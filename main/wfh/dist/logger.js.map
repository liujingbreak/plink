{"version":3,"file":"logger.js","sourceRoot":"","sources":["../ts/logger.ts"],"names":[],"mappings":";;;;AAAA,uDAAiC;AACjC,iFAA0E;AAC1E,wDAAwB;AACxB;;;;;;;;GAQG;AACH,SAAgB,QAAQ,CAAC,IAAY;IACnC,MAAM,GAAG,GAAG,IAAA,6CAAoB,GAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IACtD,IAAI,GAAG,EAAE;QACP,OAAO,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,gBAAgB,CAAC,IAAI,CAAC,cAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KAC1F;SAAM;QACL,OAAO,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC;KACzE;AACH,CAAC;AAPD,4BAOC","sourcesContent":["import * as log4js from 'log4js';\nimport {packageOfFileFactory} from './package-mgr/package-info-gathering';\nimport path from 'path';\n/**\n * Get log4js Logger for specific node.js file, the output log will have\n * category in form of \"<pkg name>.<file base name>\"\n * \n * Usage:\n * - Common JS module (cjs): loggerForFile(__filename);\n * - EJS module (mjs): loggerForFile(new URL(import.meta.url).pathname)\n * @param file \n */\nexport function log4File(file: string) {\n  const pkg = packageOfFileFactory().getPkgOfFile(file);\n  if (pkg) {\n    return log4js.getLogger(pkg.name + '.' + /^(.*?)\\.[^.]*$/.exec(path.basename(file))![1]);\n  } else {\n    return log4js.getLogger(/^(.*?)\\.[^.]*$/.exec(path.basename(file))![1]);\n  }\n}\n"]}