{"version":3,"file":"logger.js","sourceRoot":"","sources":["../ts/logger.ts"],"names":[],"mappings":";;;;AAAA,kEAA6B;AAC7B,uDAAiC;AACjC,iFAA0E;AAC1E;;;;;;;;GAQG;AACH,SAAgB,QAAQ,CAAC,IAAY,EAAE,OAAgB;IACrD,MAAM,GAAG,GAAG,IAAA,6CAAoB,GAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;IACtD,IAAI,GAAG,EAAE;QACP,OAAO,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,gBAAgB,CAAC,IAAI,CAAC,mBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAC3H;SAAM;QACL,OAAO,MAAM,CAAC,SAAS,CAAC,gBAAgB,CAAC,IAAI,CAAC,mBAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAE,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAC1G;AACH,CAAC;AAPD,4BAOC","sourcesContent":["import path from 'node:path';\nimport * as log4js from 'log4js';\nimport {packageOfFileFactory} from './package-mgr/package-info-gathering';\n/**\n * Get log4js Logger for specific node.js file, the output log will have\n * category in form of \"<pkg name>.<file base name>\"\n * \n * Usage:\n * - Common JS module (cjs): loggerForFile(__filename);\n * - EJS module (mjs): loggerForFile(new URL(import.meta.url).pathname)\n * @param file \n */\nexport function log4File(file: string, subName?: string) {\n  const pkg = packageOfFileFactory().getPkgOfFile(file);\n  if (pkg) {\n    return log4js.getLogger(pkg.name + '.' + /^(.*?)\\.[^.]*$/.exec(path.basename(file))![1] + (subName ? '.' + subName : ''));\n  } else {\n    return log4js.getLogger(/^(.*?)\\.[^.]*$/.exec(path.basename(file))![1] + (subName ? '.' + subName : ''));\n  }\n}\n"]}