{"version":3,"file":"node-path-calc.js","sourceRoot":"","sources":["../ts/node-path-calc.ts"],"names":[],"mappings":";;;;;;AAAA,gDAAwB;AACxB,oDAAuB;AAEvB,SAAgB,aAAa,CAAC,OAAe,EAAE,WAA0B,EAAE,GAAW,EAAE,QAAgB;IACtG,MAAM,SAAS,GAAa,CAAC,cAAI,CAAC,OAAO,CAAC,OAAO,EAAE,cAAc,CAAC,CAAC,CAAC;IACpE,IAAI,WAAW,EAAE;QACf,SAAS,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;KAChC;IACD,IAAI,OAAO,KAAK,GAAG,EAAE;QACnB,SAAS,CAAC,OAAO,CAAC,cAAI,CAAC,OAAO,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC,CAAC;KACtD;IAED;;;;OAIG;IACH,SAAS,CAAC,IAAI,CAAC,QAAQ,GAAG,cAAI,CAAC,GAAG,GAAG,cAAc,CAAC,CAAC;IACrD,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,EAAE;QACzB,KAAK,MAAM,IAAI,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,cAAI,CAAC,SAAS,CAAC,EAAE;YAC9D,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACtB;KACF;IAED,OAAO,gBAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AAC3B,CAAC;AAtBD,sCAsBC","sourcesContent":["import Path from 'path';\nimport _ from 'lodash';\n\nexport function calcNodePaths(rootDir: string, symlinksDir: string | null, cwd: string, plinkDir: string) {\n  const nodePaths: string[] = [Path.resolve(rootDir, 'node_modules')];\n  if (symlinksDir) {\n    nodePaths.unshift(symlinksDir);\n  }\n  if (rootDir !== cwd) {\n    nodePaths.unshift(Path.resolve(cwd, 'node_modules'));\n  }\n\n  /**\n   * Somehow when I install @wfh/plink in an new directory, npm does not dedupe dependencies from \n   * @wfh/plink/node_modules directory up to current node_modules directory, results in MODULE_NOT_FOUND\n   * from @wfh/plink/redux-toolkit-abservable for rxjs\n   */\n  nodePaths.push(plinkDir + Path.sep + 'node_modules');\n  if (process.env.NODE_PATH) {\n    for (const path of process.env.NODE_PATH.split(Path.delimiter)) {\n      nodePaths.push(path);\n    }\n  }\n\n  return _.uniq(nodePaths);\n}\n"]}