{"version":3,"file":"cmd-bootstrap.js","sourceRoot":"","sources":["../ts/cmd-bootstrap.ts"],"names":[],"mappings":";;;;;;AACA,+BAA+B;AAC/B,uBAAqB;AACrB,sDAAsD;AACtD,mDAAsD;AACtD,kDAA0B;AAE1B,4FAAiE;AAEjE,MAAM,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;AAEvC,IAAA,mCAAsB,EAAC,mCAAmC,EAAE;IAC1D,eAAe,EAAE,MAAM;IACvB,iBAAiB,EAAE,KAAK;CACzB,EAAE,GAAG,EAAE;IAEN,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,EAAE;QAC1B,sCAAsC;QACtC,OAAO,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,6BAAY,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,GAAG,KAAK,yBAAQ,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC;YAClF,eAAK,CAAC,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,OAAO,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,SAAS,KAAK,CAAC,CAAC,CAAC;IAChG,CAAC,CAAC,CAAC;IAEH,KAAM,OAAO,CAAC,WAAW,CAAiB,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACrE,OAAO,EAAE,CAAC;AACZ,CAAC,CAAC,CAAC","sourcesContent":["#!/usr/bin/env node\n/* eslint-disable no-console */\nimport './node-path';\n// import checkNode from './utils/node-version-check';\nimport {isMainThread, threadId} from 'worker_threads';\nimport chalk from 'chalk';\nimport * as _cli from './cmd/cli';\nimport runWithPreserveSymlink from './fork-for-preserve-symlink';\n\nconst startTime = new Date().getTime();\n\nrunWithPreserveSymlink('@wfh/plink/wfh/dist/cmd-bootstrap', {\n  stateExitAction: 'save',\n  handleShutdownMsg: false\n}, () => {\n\n  process.on('exit', (code) => {\n    // eslint-disable-next-line no-console\n    console.log((process.send || !isMainThread ? `[P${process.pid}.T${threadId}] ` : '') +\n      chalk.green(`${code !== 0 ? 'Failed' : 'Done'} in ${new Date().getTime() - startTime} ms`));\n  });\n\n  void (require('./cmd/cli') as typeof _cli).createCommands(startTime);\n  return [];\n});\n\n"]}