{"version":3,"file":"mem-stats.js","sourceRoot":"","sources":["../../ts/utils/mem-stats.ts"],"names":[],"mappings":";;;AAAA,0DAA0B;AAI1B,IAAI,MAA0B,CAAC;AAC/B,IAAI;IACF,MAAM,EAAE,GAAG,OAAO,CAAC,gBAAgB,CAAe,CAAC;IACnD,MAAM,GAAG,IAAI,EAAE,CAAC,YAAY,CAAC,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC,QAAQ,GAAG,CAAC;CAClF;AAAC,OAAO,GAAG,EAAE;IACZ,MAAM,GAAG,SAAS,OAAO,CAAC,GAAG,GAAG,CAAC;CAClC;AACD;IAEE,MAAM,GAAG,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;IAClC,IAAI,KAAK,GAAG,MAAO,CAAC;IACpB,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;QAClC,KAAK,IAAI,GAAG,GAAG,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAC,IAAI,GAAC,IAAI,CAAC,KAAK,CAAC;KACxD;IACD,MAAM,MAAM,GAAG,eAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IAEvC,sCAAsC;IACtC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpB,OAAO,MAAM,CAAC;AAChB,CAAC;AAZD,4BAYC","sourcesContent":["import chalk from 'chalk';\n// import { isMainThread, threadId } from 'worker_threads';\nimport * as _wt from 'worker_threads';\n\nlet header: string | undefined;\ntry {\n  const wt = require('worker_threads') as typeof _wt;\n  header = `[${wt.isMainThread ? 'pid:' + process.pid : 'thread:' + wt.threadId}]`;\n} catch (err) {\n  header = `[pid: ${process.pid}]`;\n}\nexport default function() {\n\n  const mem = process.memoryUsage();\n  let stats = header!;\n  for (const key of Object.keys(mem)) {\n    stats += `${key}: ${Math.ceil(mem[key]/1024/1024)}M, `;\n  }\n  const report = chalk.cyanBright(stats);\n\n  // eslint-disable-next-line no-console\n  console.log(report);\n  return report;\n}\n\n"]}