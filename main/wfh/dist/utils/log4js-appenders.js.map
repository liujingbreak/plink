{"version":3,"file":"log4js-appenders.js","sourceRoot":"","sources":["../../ts/utils/log4js-appenders.ts"],"names":[],"mappings":";;;AAgBA;;GAEG;AACU,QAAA,oBAAoB,GAAmB;IAClD,SAAS,CAAC,MAAc,EAAE,OAAgB;IAC1C,CAAC;CACF,CAAC;AAEW,QAAA,oBAAoB,GAAmB;IAClD,SAAS,CAAC,MAAc,EAAE,OAAgB;QACxC,sFAAsF;QACtF,IAAI,OAAO,CAAC,IAAI,IAAI,IAAI;YACtB,MAAM,IAAI,KAAK,CAAC,0EAA0E,CAAC,CAAC;QAE9F,OAAO,UAAS,QAAsB;YACpC,OAAO,CAAC,IAAK,CAAC;gBACZ,IAAI,EAAE,kBAAkB;gBACxB,OAAO,EAAE,QAAQ;aAClB,CAAC,CAAC;QACL,CAAC,CAAC;IACJ,CAAC;CACF,CAAC","sourcesContent":["/**\n * https://log4js-node.github.io/log4js-node/writing-appenders.html\n */\nimport {AppenderModule, CustomLayout, LoggingEvent} from 'log4js';\n\ntype Config = {\n  type: string;\n  layout?: {\n    type: string;\n  };\n};\n\ntype Layouts = {\n  layout(type: NonNullable<Config['layout']>['type'], layoutOpt: NonNullable<Config['layout']>): CustomLayout;\n};\n\n/**\n * Log4js can handle cluster worker configuration, it will most likely ignore appenders, so it could be empty appender\n */\nexport const clusterSlaveAppender: AppenderModule = {\n  configure(config: Config, layouts: Layouts) {\n  }\n};\n\nexport const childProcessAppender: AppenderModule = {\n  configure(config: Config, layouts: Layouts) {\n    // const layout = config.layout ? layouts.layout(config.layout.type, config.layout) : \n    if (process.send == null)\n      throw new Error('Appender can not be used with process.send undefined (in master process)');\n\n    return function(logEvent: LoggingEvent) {\n      process.send!({\n        type: 'plinkLog4jsEvent',\n        payload: logEvent\n      });\n    };\n  }\n};\n"]}