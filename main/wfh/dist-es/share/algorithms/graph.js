export var Color;
(function (Color) {
    /** unvisisted */
    Color[Color["white"] = 0] = "white";
    /** visiting */
    Color[Color["gray"] = 1] = "gray";
    /** visisted */
    Color[Color["black"] = 2] = "black";
})(Color || (Color = {}));
export class Vertex {
    constructor(data, color = Color.white) {
        this.data = data;
        this.color = color;
        /** discovery time */
        this.d = Number.MAX_VALUE;
    }
}
export function getPathTo(v, temp = []) {
    if (v.p) {
        getPathTo(v.p[0], temp);
    }
    temp.push(v);
}
class BaseGraph {
    constructor() {
        this.vertexMap = new Map();
    }
    visit(g) {
        for (const data of g) {
            const u = this.vertexOf(data);
            if (u.color === Color.white) {
                this.visitVertex(u);
            }
        }
    }
    vertexOf(data) {
        if (this.vertexMap.has(data)) {
            return this.vertexMap.get(data);
        }
        else {
            const v = new Vertex(data);
            this.vertexMap.set(data, v);
            return v;
        }
    }
}
export class DFS extends BaseGraph {
    // private vertexMap = new Map<T, Vertex<T>>();
    constructor(adjacencyOf, onFinish) {
        super();
        this.adjacencyOf = adjacencyOf;
        this.onFinish = onFinish;
        this.backEdges = [];
        this.time = 0;
        this.level = -1;
    }
    visit(g) {
        this.time = 0;
        super.visit(g);
    }
    printCyclicBackEdge(edge, edgeTo) {
        return [...this._printParentUntil(edge, edgeTo), edgeTo.data + ''];
    }
    _printParentUntil(edge, edgeAncestor) {
        if (edge == null) {
            return [];
        }
        if (edge === edgeAncestor) {
            return [edgeAncestor.data + ''];
        }
        if (edge.p)
            return [...this._printParentUntil(edge.p[0], edgeAncestor), edge.data + ''];
        else
            return ['? -> ', edge.data + ''];
    }
    visitVertex(u) {
        u.d = ++this.time;
        u.color = Color.gray;
        this.level++;
        for (const vData of this.adjacencyOf(u.data, u, this.level)) {
            const v = this.vertexOf(vData);
            if (v.color === Color.white) {
                v.p = [u];
                this.visitVertex(v);
            }
            else if (v.color === Color.gray) {
                this.backEdges.push([u, v]);
            }
            else {
                if (v.p == null)
                    v.p = [];
                v.p.push(u);
            }
        }
        u.color = Color.black;
        u.f = ++this.time;
        this.level--;
        if (this.onFinish)
            this.onFinish(u, this.level);
    }
}
export class BFS extends BaseGraph {
    constructor(adjacencyOf) {
        super();
        this.adjacencyOf = adjacencyOf;
    }
    visitVertex(s) {
        s.color = Color.gray;
        s.d = 0;
        const q = [s];
        while (q.length > 0) {
            const u = q.shift();
            for (const vData of this.adjacencyOf(u.data, u)) {
                const v = this.vertexOf(vData);
                if (v.color === Color.white) {
                    v.color = Color.gray;
                    v.d = u.d + 1;
                    if (v.p == null)
                        v.p = [];
                    v.p.push(u);
                    q.push(v);
                }
            }
            u.color = Color.black;
        }
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi90cy9zaGFyZS9hbGdvcml0aG1zL2dyYXBoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sQ0FBTixJQUFZLEtBT1g7QUFQRCxXQUFZLEtBQUs7SUFDZixpQkFBaUI7SUFDakIsbUNBQVMsQ0FBQTtJQUNULGVBQWU7SUFDZixpQ0FBSSxDQUFBO0lBQ0osZUFBZTtJQUNmLG1DQUFLLENBQUE7QUFDUCxDQUFDLEVBUFcsS0FBSyxLQUFMLEtBQUssUUFPaEI7QUFFRCxNQUFNLE9BQU8sTUFBTTtJQVFqQixZQUFtQixJQUFPLEVBQVMsUUFBUSxLQUFLLENBQUMsS0FBSztRQUFuQyxTQUFJLEdBQUosSUFBSSxDQUFHO1FBQVMsVUFBSyxHQUFMLEtBQUssQ0FBYztRQVB0RCxxQkFBcUI7UUFDckIsTUFBQyxHQUFXLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFPN0IsQ0FBQztDQUNGO0FBRUQsTUFBTSxVQUFVLFNBQVMsQ0FBSSxDQUFZLEVBQUUsT0FBTyxFQUFpQjtJQUNqRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDUCxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUN6QjtJQUNELElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDZixDQUFDO0FBRUQsTUFBZSxTQUFTO0lBQXhCO1FBQ1ksY0FBUyxHQUFHLElBQUksR0FBRyxFQUFnQixDQUFDO0lBc0JoRCxDQUFDO0lBcEJDLEtBQUssQ0FBQyxDQUFjO1FBQ2xCLEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxFQUFFO1lBQ3BCLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLEtBQUssQ0FBQyxLQUFLLEVBQUU7Z0JBQzNCLElBQUks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QUFDLEtBQUssRUFBRTtvQkFDM0IsQ0FBQyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDO29CQUNyQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUNkLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJO3dCQUNiLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO29CQUNYLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUNaLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7aUJBQ1g7YUFDRjtZQUNELENBQUMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQztTQUN2QjtJQUNILENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIENvbG9yIHtcbiAgLyoqIHVudmlzaXN0ZWQgKi9cbiAgd2hpdGUgPSAwLFxuICAvKiogdmlzaXRpbmcgKi9cbiAgZ3JheSxcbiAgLyoqIHZpc2lzdGVkICovXG4gIGJsYWNrXG59XG5cbmV4cG9ydCBjbGFzcyBWZXJ0ZXg8VD4ge1xuICAvKiogZGlzY292ZXJ5IHRpbWUgKi9cbiAgZDogbnVtYmVyID0gTnVtYmVyLk1BWF9WQUxVRTtcbiAgLyoqIGZpbmlzaGluZyB0aW1lLCB1c2VkIHRvIGNhbGN1bGF0ZSBcIlN0cm9uZ2x5IGNvbm5lY3RlZCBjb21wb25lbnRzXCIgYW5kIFwiVG9wb2xvZ2ljYWwgc29ydFwiICovXG4gIGY6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgLyoqIHBhcmVudCB2ZXJ0aWNlcyAqL1xuICBwPzogVmVydGV4PFQ+W107XG5cbiAgY29uc3RydWN0b3IocHVibGljIGRhdGE6IFQsIHB1YmxpYyBjb2xvciA9IENvbG9yLndoaXRlKSB7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBhdGhUbzxUPih2OiBWZXJ0ZXg8VD4sIHRlbXAgPSBbXSBhcyBWZXJ0ZXg8VD5bXSkge1xuICBpZiAodi5wKSB7XG4gICAgZ2V0UGF0aFRvKHYucFswXSwgdGVtcCk7XG4gIH1cbiAgdGVtcC5wdXNoKHYpO1xufVxuXG5hYnN0cmFjdCBjbGFzcyBCYXNlR3JhcGg8VD4ge1xuICBwcm90ZWN0ZWQgdmVydGV4TWFwID0gbmV3IE1hcDxULCBWZXJ0ZXg8VD4+KCk7XG5cbiAgdmlzaXQoZzogSXRlcmFibGU8VD4pIHtcbiAgICBmb3IgKGNvbnN0IGRhdGEgb2YgZykge1xuICAgICAgY29uc3QgdSA9IHRoaXMudmVydGV4T2YoZGF0YSk7XG4gICAgICBpZiAodS5jb2xvciA9PT0gQ29sb3Iud2hpdGUpIHtcbiAgICAgICAgdGhpcy52aXNpdFZlcnRleCh1KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgdmlzaXRWZXJ0ZXgodTogVmVydGV4PFQ+KTogdm9pZDtcblxuICBwcm90ZWN0ZWQgdmVydGV4T2YoZGF0YTogVCkge1xuICAgIGlmICh0aGlzLnZlcnRleE1hcC5oYXMoZGF0YSkpIHtcbiAgICAgIHJldHVybiB0aGlzLnZlcnRleE1hcC5nZXQoZGF0YSkhO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB2ID0gbmV3IFZlcnRleChkYXRhKTtcbiAgICAgIHRoaXMudmVydGV4TWFwLnNldChkYXRhLCB2KTtcbiAgICAgIHJldHVybiB2O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgREZTPFQ+IGV4dGVuZHMgQmFzZUdyYXBoPFQ+IHtcbiAgYmFja0VkZ2VzOiBbVmVydGV4PFQ+LCBWZXJ0ZXg8VD5dW10gPSBbXTtcblxuICBwcml2YXRlIHRpbWUgPSAwO1xuICBwcml2YXRlIGxldmVsID0gLTE7XG4gIC8vIHByaXZhdGUgdmVydGV4TWFwID0gbmV3IE1hcDxULCBWZXJ0ZXg8VD4+KCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBhZGphY2VuY3lPZjogKHU6IFQsIHZlcnRleDogVmVydGV4PFQ+LCBsZXZlbDogbnVtYmVyKSA9PiBJdGVyYWJsZTxUPiwgcHJpdmF0ZSBvbkZpbmlzaD86ICh2ZXJ0ZXg6IFZlcnRleDxUPiwgbGV2ZWw6IG51bWJlcikgPT4gYW55KSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHZpc2l0KGc6IEl0ZXJhYmxlPFQ+KSB7XG4gICAgdGhpcy50aW1lID0gMDtcbiAgICBzdXBlci52aXNpdChnKTtcbiAgfVxuXG4gIHByaW50Q3ljbGljQmFja0VkZ2UoZWRnZTogVmVydGV4PFQ+LCBlZGdlVG86IFZlcnRleDxUPik6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuX3ByaW50UGFyZW50VW50aWwoZWRnZSwgZWRnZVRvKSwgZWRnZVRvLmRhdGEgKyAnJ107XG4gIH1cblxuICBfcHJpbnRQYXJlbnRVbnRpbChlZGdlOiBWZXJ0ZXg8VD4sIGVkZ2VBbmNlc3RvcjogVmVydGV4PFQ+KTogc3RyaW5nW10ge1xuICAgIGlmIChlZGdlID09IG51bGwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgaWYgKGVkZ2UgPT09IGVkZ2VBbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIFtlZGdlQW5jZXN0b3IuZGF0YSArICcnXTtcbiAgICB9XG4gICAgaWYgKGVkZ2UucClcbiAgICAgIHJldHVybiBbLi4udGhpcy5fcHJpbnRQYXJlbnRVbnRpbChlZGdlLnBbMF0sIGVkZ2VBbmNlc3RvciksIGVkZ2UuZGF0YSArICcnXTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gWyc/IC0+ICcsIGVkZ2UuZGF0YSArICcnXTtcbiAgfVxuXG4gIHByb3RlY3RlZCB2aXNpdFZlcnRleCh1OiBWZXJ0ZXg8VD4pIHtcbiAgICB1LmQgPSArK3RoaXMudGltZTtcbiAgICB1LmNvbG9yID0gQ29sb3IuZ3JheTtcbiAgICB0aGlzLmxldmVsKys7XG4gICAgZm9yIChjb25zdCB2RGF0YSBvZiB0aGlzLmFkamFjZW5jeU9mKHUuZGF0YSwgdSwgdGhpcy5sZXZlbCkpIHtcbiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRleE9mKHZEYXRhKTtcbiAgICAgIGlmICh2LmNvbG9yID09PSBDb2xvci53aGl0ZSkge1xuICAgICAgICB2LnAgPSBbdV07XG4gICAgICAgIHRoaXMudmlzaXRWZXJ0ZXgodik7XG4gICAgICB9IGVsc2UgaWYgKHYuY29sb3IgPT09IENvbG9yLmdyYXkpIHtcbiAgICAgICAgdGhpcy5iYWNrRWRnZXMucHVzaChbdSwgdl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHYucCA9PSBudWxsKVxuICAgICAgICAgIHYucCA9IFtdO1xuICAgICAgICB2LnAucHVzaCh1KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdS5jb2xvciA9IENvbG9yLmJsYWNrO1xuICAgIHUuZiA9ICsrdGhpcy50aW1lO1xuICAgIHRoaXMubGV2ZWwtLTtcbiAgICBpZiAodGhpcy5vbkZpbmlzaClcbiAgICAgIHRoaXMub25GaW5pc2godSwgdGhpcy5sZXZlbCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJGUzxUPiBleHRlbmRzIEJhc2VHcmFwaDxUPiB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgYWRqYWNlbmN5T2Y6ICh1OiBULCB2ZXJ0ZXg6IFZlcnRleDxUPikgPT4gSXRlcmFibGU8VD4pIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHZpc2l0VmVydGV4KHM6IFZlcnRleDxUPikge1xuICAgIHMuY29sb3IgPSBDb2xvci5ncmF5O1xuICAgIHMuZCA9IDA7XG4gICAgY29uc3QgcTogVmVydGV4PFQ+W10gPSBbc107XG4gICAgd2hpbGUgKHEubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdSA9IHEuc2hpZnQoKSE7XG4gICAgICBmb3IgKGNvbnN0IHZEYXRhIG9mIHRoaXMuYWRqYWNlbmN5T2YodS5kYXRhLCB1KSkge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy52ZXJ0ZXhPZih2RGF0YSk7XG4gICAgICAgIGlmICh2LmNvbG9yID09PSBDb2xvci53aGl0ZSkge1xuICAgICAgICAgIHYuY29sb3IgPSBDb2xvci5ncmF5O1xuICAgICAgICAgIHYuZCA9IHUuZCArIDE7XG4gICAgICAgICAgaWYgKHYucCA9PSBudWxsKVxuICAgICAgICAgICAgdi5wID0gW107XG4gICAgICAgICAgdi5wLnB1c2godSk7XG4gICAgICAgICAgcS5wdXNoKHYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1LmNvbG9yID0gQ29sb3IuYmxhY2s7XG4gICAgfVxuICB9XG59XG4iXX0=