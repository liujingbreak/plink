{"version":3,"file":"parse-esnext-import.js","sourceRoot":"","sources":["../ts/parse-esnext-import.ts"],"names":[],"mappings":";;;;;;AAAA,oDAAuB;AACvB,6BAA6B;AAE7B,IAAI,GAAG,GAAG,CAAC,CAAC;AAEZ,SAAgB,YAAY,CAAC,UAAqB,EAAE,QAAgB;IACnE,IAAI,GAAG,GAAG,EAAE,CAAC;IAEb,IAAI,cAAsB,CAAC;IAC3B,cAAc,GAAG,OAAO,GAAG,GAAG,EAAE,GAAG,IAAI,CAAC;IACxC,IAAI,UAAU,CAAC,UAAU,EAAE;QAC1B,GAAG,IAAI,KAAK,UAAU,CAAC,UAAU,MAAM,cAAc,aAAa,CAAC;KACnE;IACD,IAAI,UAAU,CAAC,YAAY,EAAE;QAC5B,GAAG,IAAI,KAAK,UAAU,CAAC,YAAY,MAAM,cAAc,EAAE,CAAC;KAC1D;IACD,gBAAC,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE;QACxC,GAAG,IAAI,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG,cAAc,GAAG,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;IAClG,CAAC,CAAC,CAAC;IACH,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE;QACnB,OAAO,OAAO,cAAc,MAAM,QAAQ,GAAG,GAAG,GAAG,CAAC;KACpD;SAAM;QACN,OAAO,QAAQ,GAAG,GAAG,CAAC;KACtB;AACF,CAAC;AAnBD,oCAmBC;AAED,MAAa,SAAS;IAAtB;QACC,SAAI,GAA0B,EAAE,CAAC,CAAC,0BAA0B;IAI7D,CAAC;CAAA;AALD,8BAKC;AAED,MAAa,eAAe;IAA5B;QACC,aAAQ,GAA6B,EAAE,CAAC,CAAC,uDAAuD;IAEjG,CAAC;CAAA;AAHD,0CAGC;AAED,SAAgB,KAAK,CAAC,GAAQ;IAC7B,IAAI,GAAG,GAAc,IAAI,SAAS,EAAE,CAAC;IACrC,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,UAAS,KAAU;QACzC,IAAI,KAAK,CAAC,IAAI,KAAK,wBAAwB,EAAE;YAC5C,GAAG,CAAC,UAAU,GAAG,gBAAC,CAAC,GAAG,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;YAC5C,OAAO;SACP;QACD,IAAI,QAAQ,GAAG,gBAAC,CAAC,GAAG,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QAC7C,IAAI,CAAC,QAAQ;YACZ,GAAG,CAAC,YAAY,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC;;YAEpC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;IACxC,CAAC,CAAC,CAAC;IACH,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;IAC5B,OAAO,GAAG,CAAC;AACZ,CAAC;AAfD,sBAeC;AAED,SAAgB,WAAW,CAAC,GAAQ;IACnC,IAAI,GAAG,GAAoB,IAAI,eAAe,EAAE,CAAC;IACjD,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,UAAS,KAAU;QACzC,IAAI,IAAI,GAAG,gBAAC,CAAC,GAAG,CAAC,KAAK,EAAE,eAAe,CAAC,CAAC;QACzC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC;IACvC,CAAC,CAAC,CAAC;IACH,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;IAC5B,OAAO,GAAG,CAAC;AACZ,CAAC;AARD,kCAQC;AAED,SAAS,GAAG;IACX,OAAO,EAAE,GAAG,CAAC;AACd,CAAC","sourcesContent":["import _ from 'lodash';\n// var {EOL} = require('os');\n\nvar seq = 0;\n\nexport function toAssignment(parsedInfo: ParseInfo, valueStr: string): string {\n\tvar dec = '';\n\n\tvar importsVarName: string;\n\timportsVarName = '__imp' + uid() + '__';\n\tif (parsedInfo.defaultVar) {\n\t\tdec += `, ${parsedInfo.defaultVar} = ${importsVarName}[\"default\"]`;\n\t}\n\tif (parsedInfo.namespaceVar) {\n\t\tdec += `, ${parsedInfo.namespaceVar} = ${importsVarName}`;\n\t}\n\t_.each(parsedInfo.vars, (member, name) => {\n\t\tdec += ', ' + name + ' = ' + importsVarName + '[' + JSON.stringify(member ? member : name) + ']';\n\t});\n\tif (dec.length > 0) {\n\t\treturn `var ${importsVarName} = ${valueStr}${dec};`;\n\t} else {\n\t\treturn valueStr + ';';\n\t}\n}\n\nexport class ParseInfo {\n\tvars: {[k: string]: string} = {}; // import {foo as bar ...}\n\tdefaultVar: string; // import foo from ...\n\tnamespaceVar: string; // import * as ...\n\tfrom: string;\n}\n\nexport class ParseExportInfo {\n\texported: {[name: string]: string} = {}; // Empty means ExportAllDeclaration \"export * from ...\"\n\tfrom: string;\n}\n\nexport function parse(ast: any): ParseInfo {\n\tvar res: ParseInfo = new ParseInfo();\n\tast.specifiers.forEach(function(speci: any) {\n\t\tif (speci.type === 'ImportDefaultSpecifier') {\n\t\t\tres.defaultVar = _.get(speci, 'local.name');\n\t\t\treturn;\n\t\t}\n\t\tvar imported = _.get(speci, 'imported.name');\n\t\tif (!imported)\n\t\t\tres.namespaceVar = speci.local.name;\n\t\telse\n\t\t\tres.vars[speci.local.name] = imported;\n\t});\n\tres.from = ast.source.value;\n\treturn res;\n}\n\nexport function parseExport(ast: any): ParseExportInfo {\n\tvar res: ParseExportInfo = new ParseExportInfo();\n\tast.specifiers.forEach(function(speci: any) {\n\t\tvar name = _.get(speci, 'exported.name');\n\t\tres.exported[name] = speci.local.name;\n\t});\n\tres.from = ast.source.value;\n\treturn res;\n}\n\nfunction uid() {\n\treturn ++seq;\n}\n"]}