{"version":3,"file":"web-worker-broker.js","sourceRoot":"","sources":["../src/web-worker-broker.ts"],"names":[],"mappings":";AAAA,8BAA8B;AAC9B,2CAA2C;AAC3C,qDAAqD;AACrD,oDAAoD;;AAEpD,8DAA8D;AAC5D,gEAAgE;AAChE,sBAAsB;AACtB,SAAS;AACT,oBAAoB;AACpB,2CAA2C;AAC3C,2CAA2C;AAC3C,+FAA+F;AAC/F,wEAAwE;AACxE,qDAAqD;AACrD,4DAA4D;AAC5D,gCAAgC;AAChC,wBAAwB;AACxB,kDAAkD;AAClD,eAAe;AACf,mBAAmB;AACnB,0EAA0E;AAC1E,0EAA0E;AAC1E,gEAAgE;AAChE,YAAY;AACZ,WAAW;AACX,+CAA+C;AAC/C,oDAAoD;AACpD,WAAW;AACX,8GAA8G;AAC9G,SAAS;AACT,QAAQ;AAER,gEAAgE;AAClE,IAAI","sourcesContent":["// import * as rx from 'rxjs';\n// import {ReactorComposite} from './epic';\n// import {Action, ActionFunctions} from './control';\n// import {BrokerInput, BrokerEvent} from './types';\n\n// export function createBroker<A extends ActionFunctions>() {\n  // const ctx = new ReactorComposite<BrokerInput, BrokerEvent>();\n  // const {i, o} = ctx;\n  // ctx.r(\n  //   i.pt.init.pipe(\n  //     rx.map(([id, workerNo, worker]) => {\n  //       const chan = new MessageChannel();\n  //       chan.port1.onmessage = (event: MessageEvent<Action<A, keyof A> | {type: string}>) => {\n  //         if ((event.data as {type: string}).type === 'WORKER_READY') {\n  //           o.dp.initDone(workerNo, chan.port1, id);\n  //         } else if ((event.data as {error?: any}).error) {\n  //           o.dp.onWorkerError(\n  //             workerNo,\n  //             (event.data as {error?: any}).error\n  //           );\n  //         } else {\n  //           const {data} = event as MessageEvent<Action<any, keyof any>>;\n  //           // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n  //           (o.dp[data.t as keyof typeof o.dp] as any)(data.p);\n  //         }\n  //       };\n  //       chan.port1.onmessageerror = event => {\n  //         o.dp.onWorkerError(workerNo, event.data);\n  //       };\n  //       (worker as Worker).postMessage({type: 'ASSIGN_WORKER_NO', workerNo, port: chan.port2}, [chan.port2]);\n  //     })\n  //   ));\n\n  // return ctx as ReactorComposite<BrokerInput, BrokerEvent & A>;\n// }\n\n"]}