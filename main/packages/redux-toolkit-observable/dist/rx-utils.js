"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.reselect = exports.filterEffect = void 0;
const operators_1 = require("rxjs/operators");
/** A React useEffect() hook like operator function */
function filterEffect(dependecies) {
    return (src) => {
        return src.pipe((0, operators_1.map)(s => dependecies(s)), (0, operators_1.distinctUntilChanged)((deps1, deps2) => {
            if (deps1.length !== deps2.length) {
                return false;
            }
            return deps1.length === deps2.length && deps1.every((dep, i) => dep === deps2[i]);
        }));
    };
}
exports.filterEffect = filterEffect;
function reselect(selectors, combine) {
    return src => {
        return src.pipe(
        // eslint-disable-next-line @typescript-eslint/no-unsafe-return
        (0, operators_1.map)(s => selectors.map(selector => selector(s))), (0, operators_1.distinctUntilChanged)((a, b) => a.every((result, i) => result === b[i])), (0, operators_1.map)(results => combine(...results)));
    };
}
exports.reselect = reselect;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicngtdXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9yeC11dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSw4Q0FBeUQ7QUFFekQsc0RBQXNEO0FBQ3RELFNBQWdCLFlBQVksQ0FBcUIsV0FBOEI7SUFDN0UsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFO1FBQ2IsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUNiLElBQUEsZUFBRyxFQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3hCLElBQUEsZ0NBQW9CLEVBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDcEMsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssQ0FBQyxNQUFNLEVBQUU7Z0JBQ2pDLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7WUFDRCxPQUFPLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BGLENBQUMsQ0FBQyxDQUNILENBQUM7SUFDSixDQUFDLENBQUM7QUFDSixDQUFDO0FBWkQsb0NBWUM7QUFFRCxTQUFnQixRQUFRLENBQTJCLFNBRWxELEVBQUUsT0FBMEQ7SUFDM0QsT0FBTyxHQUFHLENBQUMsRUFBRTtRQUNYLE9BQU8sR0FBRyxDQUFDLElBQUk7UUFDYiwrREFBK0Q7UUFDL0QsSUFBQSxlQUFHLEVBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFtQyxDQUFDLEVBQ2xGLElBQUEsZ0NBQW9CLEVBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3ZFLElBQUEsZUFBRyxFQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FDcEMsQ0FBQztJQUNKLENBQUMsQ0FBQztBQUNKLENBQUM7QUFYRCw0QkFXQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7T3BlcmF0b3JGdW5jdGlvbn0gZnJvbSAncnhqcyc7XG5pbXBvcnQge2Rpc3RpbmN0VW50aWxDaGFuZ2VkLCBtYXB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyoqIEEgUmVhY3QgdXNlRWZmZWN0KCkgaG9vayBsaWtlIG9wZXJhdG9yIGZ1bmN0aW9uICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyRWZmZWN0PFQsIFIgZXh0ZW5kcyBhbnlbXT4oZGVwZW5kZWNpZXM6IChjdXJyZW50OiBUKSA9PiBSKTogT3BlcmF0b3JGdW5jdGlvbjxULCBSPiB7XG4gIHJldHVybiAoc3JjKSA9PiB7XG4gICAgcmV0dXJuIHNyYy5waXBlKFxuICAgICAgbWFwKHMgPT4gZGVwZW5kZWNpZXMocykpLFxuICAgICAgZGlzdGluY3RVbnRpbENoYW5nZWQoKGRlcHMxLCBkZXBzMikgPT4ge1xuICAgICAgICBpZiAoZGVwczEubGVuZ3RoICE9PSBkZXBzMi5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlcHMxLmxlbmd0aCA9PT0gZGVwczIubGVuZ3RoICYmIGRlcHMxLmV2ZXJ5KChkZXAsIGkpID0+IGRlcCA9PT0gZGVwczJbaV0pO1xuICAgICAgfSlcbiAgICApO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZWxlY3Q8VCwgUiwgUjEsIFIyLCBSMywgUjQsIFI1PihzZWxlY3RvcnM6IFtcbiAgKGN1cnJlbnQ6IFQpID0+IFIxLCAoY3VycmVudDogVCkgPT4gUjIsIChjdXJyZW50OiBUKSA9PiBSMywgKGN1cnJlbnQ6IFQpID0+IFI0LCAoY3VycmVudDogVCkgPT4gUjUsIC4uLigoY3VycmVudDogVCkgPT4gYW55KVtdXG5dLCBjb21iaW5lOiAoLi4ucmVzdWx0czogW1IxLCBSMiwgUjMsIFI0LCBSNSwgLi4uYW55W11dKSA9PiBSKTogT3BlcmF0b3JGdW5jdGlvbjxULCBSPiB7XG4gIHJldHVybiBzcmMgPT4ge1xuICAgIHJldHVybiBzcmMucGlwZShcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLXJldHVyblxuICAgICAgbWFwKHMgPT4gc2VsZWN0b3JzLm1hcChzZWxlY3RvciA9PiBzZWxlY3RvcihzKSkgYXMgW1IxLCBSMiwgUjMsIFI0LCBSNSwgLi4uYW55W11dKSxcbiAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKChhLCBiKSA9PiBhLmV2ZXJ5KChyZXN1bHQsIGkpID0+IHJlc3VsdCA9PT0gYltpXSkpLFxuICAgICAgbWFwKHJlc3VsdHMgPT4gY29tYmluZSguLi5yZXN1bHRzKSlcbiAgICApO1xuICB9O1xufVxuIl19