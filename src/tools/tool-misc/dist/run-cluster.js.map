{"version":3,"file":"run-cluster.js","sourceRoot":"","sources":["run-cluster.ts"],"names":[],"mappings":";;;AAAA,wEAAmC;AACnC,qCAA6B;AAC7B,sCAAoC;AAEpC,MAAM,OAAO,GAAG,IAAA,cAAI,GAAE,CAAC,MAAM,CAAC;AAC9B,MAAM,GAAG,GAAG,IAAA,gBAAQ,EAAC,UAAU,CAAC,CAAC;AAEjC,IAAI,sBAAO,CAAC,SAAS,EAAE;IACrB,GAAG,CAAC,IAAI,CAAC,WAAW,OAAO,CAAC,GAAG,aAAa,CAAC,CAAC;IAE9C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QACpC,sBAAO,CAAC,IAAI,EAAE,CAAC;KAChB;IACD,sBAAO,CAAC,EAAE,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;QAC1C,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;IAClD,CAAC,CAAC,CAAC;CACJ","sourcesContent":["import cluster from 'node:cluster';\nimport {cpus} from 'node:os';\nimport {log4File} from '@wfh/plink';\n\nconst numCPUs = cpus().length;\nconst log = log4File(__filename);\n\nif (cluster.isPrimary) {\n  log.info(`Primary ${process.pid} is running`);\n\n  for (let i = 0; i < numCPUs - 1; i++) {\n    cluster.fork();\n  }\n  cluster.on('exit', (worker, code, signal) => {\n    log.info('Worker', worker.process.pid, 'exits');\n  });\n}\n"]}