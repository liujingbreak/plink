{"version":3,"file":"service-test-worker.js","sourceRoot":"","sources":["service-test-worker.ts"],"names":[],"mappings":";;;AAAA,2DAAqC;AACrC,iDAA2B;AAC3B,sCAAiD;AAEjD,IAAA,mBAAW,EAAC,MAAM,CAAC,CAAC;AAEpB,KAAK,CAAC,KAAK,IAAI,EAAE;IACf,MAAM,EAAC,YAAY,EAAC,GAAG,gEAAa,6CAA6C,GAAC,CAAC;IACnF,MAAM,GAAG,GAAG,IAAA,gBAAQ,EAAC,UAAU,CAAC,CAAC;IACjC,MAAM,MAAM,GAAG,YAAY,EAAE,CAAC;IAE9B,EAAE,CAAC,MAAM,CACP,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,IAAI,CAC/B,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC,EAC5C,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CACX,EACD,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CACX,EAAE,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAC9B,CACF,CAAC,SAAS,EAAE,CAAC;IAEd,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;IACzC,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;IACvD,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,EAAE,CAAC,CAAC;IAEzC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AACxB,CAAC,CAAC,EAAE,CAAC","sourcesContent":["import * as op from 'rxjs/operators';\nimport * as rx from 'rxjs';\nimport {initProcess, log4File} from '@wfh/plink';\n\ninitProcess('none');\n\nvoid (async () => {\n  const {createClient} = await import('../../http-cache-server/cache-service-store');\n  const log = log4File(__filename);\n  const client = createClient();\n\n  rx.concat(\n    client.actionOfType('_done').pipe(\n      op.map(act => log.info(act.type, 'is done')),\n      op.take(2)\n    ),\n    rx.of(1).pipe(\n      op.map(() => process.exit(0))\n    )\n  ).subscribe();\n\n  client.dispatcher.ping(process.pid + '');\n  await new Promise(resolve => setTimeout(resolve, 500));\n  client.dispatcher.ping(process.pid + '');\n\n  log.info('ping sent');\n})();\n\n\n"]}